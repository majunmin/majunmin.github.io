{"title":"Apache-AB性能测试工具","uid":"ff81db1204df3c00c93bb459f070d6f2","slug":"Apache-AB性能测试工具","date":"2019-04-28T10:03:21.000Z","updated":"2019-04-28T10:08:30.000Z","comments":true,"path":"api/articles/Apache-AB性能测试工具.json","keywords":null,"cover":null,"content":"<p><a href=\"https://httpd.apache.org/docs/2.4/programs/ab.html\">ApacheAB 官方Doc</a></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>Apache AB 性能测试工具，这是 apache 免费自带的 性能测试工具, 就在 apache bin目录下，他能模拟多个并发请求，主要用来测试你的 服务每秒能承受多少并发请求。</p></blockquote>\n<span id=\"more\"></span>\n\n<h2 id=\"命令\"><a href=\"#命令\" class=\"headerlink\" title=\"命令\"></a>命令</h2><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">ab -n 3000 -c 3000 http:&#x2F;&#x2F;www.test.com&#x2F;\n# -c 3000 每次发送3000 个请求\n# -n 3000 共3000 个请求\n\nab -t 60 -c 100 http:&#x2F;&#x2F;www.test.com&#x2F;\n# -t 60 在 60s内发送请求，每次发送 100 个请求\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"带参数的的请求\"><a href=\"#带参数的的请求\" class=\"headerlink\" title=\"带参数的的请求\"></a>带参数的的请求</h2><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">ab -t 60 -c 100 -T &quot;application&#x2F;x-www-form-urlencoded&quot; p p.txt http:&#x2F;&#x2F;www.test.com&#x2F;\n# application&#x2F;x-www-form-urlencoded (默认值)\n#  就是设置表单传输的编码,典型的post请求\n# multipart&#x2F;form-data\n#  用来指定传输数据的特殊类型的，主要就是我们上传的非文本的内容，比如图片、mp3,文件等等\n# text&#x2F;plain\n#  是纯文本传输的意思<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"发送-json-数据\"><a href=\"#发送-json-数据\" class=\"headerlink\" title=\"发送 json 数据\"></a>发送 json 数据</h2><pre class=\"line-numbers language-sh\" data-language=\"sh\"><code class=\"language-sh\">ab -n 100000 -c 400 -p tempPara.txt -T application&#x2F;json http:&#x2F;&#x2F;www.test.com&#x2F;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-txt\" data-language=\"txt\"><code class=\"language-txt\"># tempPara.txt\n&#123;\"driverId\": 17,\"pageNo\": 1,\"pageSize\": 20,\"status\": 1&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<h2 id=\"常用参数说明\"><a href=\"#常用参数说明\" class=\"headerlink\" title=\"常用参数说明\"></a>常用参数说明</h2><p><a href=\"https://httpd.apache.org/docs/2.4/programs/ab.html\">参数说明</a></p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">-A auth-username:password\n# 对服务器提供BASIC认证信任。 \n# 用户名和密码由一个:隔开，并以base64编码形式发送。 无论服务器是否需要(即, 是否发送了401认证需求代码)，此字符串都会被发送。\n\n-c concurrency\n#  一次产生的请求个数。默认是一次一个。\n\n-n\n# 一共请求多少次\n\n-t timelimit \n# 测试所进行的最大秒数。\n# 其内部隐含值是-n 50000。 它可以使对服务器的测试限制在一个固定的总时间以内。默认时，没有时间限制。\n\n-T \n# content-type POST数据所使用的Content-type头信息。\n\n-p \n# POST-file包含了需要POST的数据的文件.<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"结果解析\"><a href=\"#结果解析\" class=\"headerlink\" title=\"结果解析\"></a>结果解析</h2><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">This is ApacheBench, Version 2.3\nCopyright 1996 Adam Twiss, Zeus Technology Ltd, http:&#x2F;&#x2F;www.zeustech.net&#x2F;\nLicensed to The Apache Software Foundation, http:&#x2F;&#x2F;www.apache.org&#x2F;\n\nBenchmarking 192.168.80.157 (be patient)\nCompleted 400 requests\nCompleted 800 requests\nCompleted 1200 requests\nCompleted 1600 requests\nCompleted 2000 requests\nCompleted 2400 requests\nCompleted 2800 requests\nCompleted 3200 requests\nCompleted 3600 requests\nCompleted 4000 requests\nFinished 4000 requests\n\nServer Software: Apache&#x2F;2.2.15\nServer Hostname: 192.168.80.157\nServer Port: 80\n\nDocument Path: &#x2F;phpinfo.php\n#测试的页面\nDocument Length: 50797 bytes\n#页面大小\n\nConcurrency Level: 1000\n#测试的并发数\nTime taken for tests: 11.846 seconds\n#整个测试持续的时间\nComplete requests: 4000\n#完成的请求数量\nFailed requests: 0\n#失败的请求数量\nWrite errors: 0\nTotal transferred: 204586997 bytes\n#整个过程中的网络传输量\nHTML transferred: 203479961 bytes\n#整个过程中的HTML内容传输量\nRequests per second: 337.67 [#&#x2F;sec] (mean)\n#最重要的指标之一，相当于LR中的每秒事务数，后面括号中的mean表示这是一个平均值\nTime per request: 2961.449 [ms] (mean)\n#最重要的指标之二，相当于LR中的平均事务响应时间，后面括号中的mean表示这是一个平均值\nTime per request: 2.961 [ms] (mean, across all concurrent requests)\n#每个连接请求实际运行时间的平均值\nTransfer rate: 16866.07 [Kbytes&#x2F;sec] received\n#平均每秒网络上的流量，可以帮助排除是否存在网络流量过大导致响应时间延长的问题\nConnection Times (ms)\nmin mean[+&#x2F;-sd] median max\nConnect: 0 483 1773.5 11 9052\nProcessing: 2 556 1459.1 255 11763\nWaiting: 1 515 1459.8 220 11756\nTotal: 139 1039 2296.6 275 11843\n#网络上消耗的时间的分解，各项数据的具体算法还不是很清楚\n\nPercentage of the requests served within a certain time (ms)\n50% 275\n66% 298\n75% 328\n80% 373\n90% 3260\n95% 9075\n98% 9267\n99% 11713\n100% 11843 (longest request)\n#整个场景中所有请求的响应情况。在场景中每个请求都有一个响应时间，其中50％的用户响应时间小于275毫秒，66％的用户响应时间小于298毫秒，最大的响应时间小于11843毫秒。对于并发请求，cpu实际上并不是同时处理的，而是按照每个请求获得的时间片逐个轮转处理的，所以基本上第一个Time per request时间约等于第二个Time per request时间乘以并发请求数。<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","text":"ApacheAB 官方Doc Apache AB 性能测试工具，这是 apache 免费自带的 性能测试工具, 就在 apache bin目录下，他能模拟多个并发请求，主要用来测试你的 服务每秒能承受多少并发请求。 命令ab -n 3000 -c 3000 http:&#x2F;...","link":"","photos":[],"count_time":{"symbolsCount":"3k","symbolsTime":"3 mins."},"categories":[],"tags":[{"name":"apacheAB","slug":"apacheAB","count":1,"path":"api/tags/apacheAB.json"},{"name":"并发","slug":"并发","count":1,"path":"api/tags/并发.json"},{"name":"性能测试工具","slug":"性能测试工具","count":1,"path":"api/tags/性能测试工具.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">命令</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%B8%A6%E5%8F%82%E6%95%B0%E7%9A%84%E7%9A%84%E8%AF%B7%E6%B1%82\"><span class=\"toc-text\">带参数的的请求</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%91%E9%80%81-json-%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">发送 json 数据</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%B8%B8%E7%94%A8%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E\"><span class=\"toc-text\">常用参数说明</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%BB%93%E6%9E%9C%E8%A7%A3%E6%9E%90\"><span class=\"toc-text\">结果解析</span></a></li></ol>","author":{"name":"majm","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"技术分享","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Hello World","uid":"b9663f58f18133b35bfe243f3e916a80","slug":"hello-world","date":"2019-04-28T10:07:13.000Z","updated":"2019-04-28T10:07:13.000Z","comments":true,"path":"api/articles/hello-world.json","keywords":null,"cover":null,"text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the ...","link":"","photos":[],"count_time":{"symbolsCount":432,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"majm","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"技术分享","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Kafka 入门","uid":"937bc65e7fc0650a79730217f9c7b325","slug":"Kafka-入门","date":"2019-04-28T07:08:15.000Z","updated":"2022-03-03T15:51:22.323Z","comments":true,"path":"api/articles/Kafka-入门.json","keywords":null,"cover":[],"text":"英文文档 | 中文文档 Kafka 是由 LinkedIn 开发的一个分布式的消息系统，使用 Scala 编写，它以可水平扩展和高吞吐率而被广泛使用。 Mac 安装kafka# 会自动 安装会依赖zookeeper brew install kafka # 启动 zookeepe...","link":"","photos":[],"count_time":{"symbolsCount":"4.2k","symbolsTime":"4 mins."},"categories":[{"name":"kafka","slug":"kafka","count":4,"path":"api/categories/kafka.json"}],"tags":[{"name":"kafka","slug":"kafka","count":3,"path":"api/tags/kafka.json"}],"author":{"name":"majm","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"技术分享","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}